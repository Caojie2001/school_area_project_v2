# 测试数据改造说明

## 功能说明

本脚本将 `高校测算_测试数据0821.xlsx` 改造为符合 v2.3.0 项目结构的测试数据。

### 改造内容

1. **学生数据拆分**：将简单的学生总数拆分为详细字段
   - 全日制学生：本科生、专科生、硕士生、博士生
   - 留学生：本科生、硕士生、博士生

2. **面积数据拆分**：将单一面积数据拆分为三个阶段
   - 现状（60%）
   - 拟建成_前期（20%）
   - 拟建成_在建(含竣工)（20%）

### 运行方式

#### 方式1：使用 nvm（推荐）

```bash
# 激活 Node.js 环境
nvm use 22
# 或
nvm use default

# 进入项目目录
cd /Users/caojie/Desktop/sicc/school_area_project_250922

# 运行转换脚本
node scripts/transform_test_data.js
```

#### 方式2：使用 conda

```bash
# 激活包含 Node.js 的 conda 环境
conda activate <your_node_env>

# 运行脚本
node scripts/transform_test_data.js
```

### 输出文件

**文件名**：`test/manual/高校测算_测试数据_v2.3.0.xlsx`

**包含工作表**：

1. **学校基础信息** - 学校名称、院校类型、测算年份
2. **学生数据明细** - 详细拆分的学生人数
3. **建筑面积数据_三阶段** - 按现状、前期、在建拆分的面积数据
4. **综合测试数据** - 完整的测试数据（推荐用于手动测试）
5. **测试场景说明** - 8种测试场景及预期结果
6. **字段说明** - 所有字段的详细说明

### 数据拆分规则

#### 学生数据拆分比例（默认）

- 全日制本科生：70%
- 全日制专科生：20%
- 全日制硕士生：8%
- 全日制博士生：2%

- 留学生本科生：60%
- 留学生硕士生：30%
- 留学生博士生：10%

#### 面积数据拆分比例

- 现状：60%
- 拟建成前期：20%
- 拟建成在建(含竣工)：20%

### 使用建议

1. 使用 **"综合测试数据"** 工作表进行手动测试，包含所有必要字段
2. 参考 **"测试场景说明"** 工作表了解各测试场景
3. 参考 **"字段说明"** 工作表了解每个字段的含义和要求
4. 所有数值字段都保留了汇总列，便于核对原始数据

### 测试场景

| 场景编号 | 场景名称 | 测试目标 |
|---------|---------|---------|
| T01 | 基础功能测试 | 验证基本计算功能 |
| T02 | 大规模学校测试 | 验证大规模数据处理 |
| T03 | 小规模学校测试 | 验证小规模学校计算 |
| T04 | 三阶段面积测试 | 验证现状、前期、在建三阶段面积计算 |
| T05 | 留学生比例测试 | 验证留学生人数对面积计算的影响 |
| T06 | 边界值测试 | 验证极端数据处理 |
| T07 | 特殊补助测试 | 验证特殊补助面积计算 |
| T08 | 不同院校类型对比 | 验证不同院校类型标准差异 |

### 注意事项

1. 运行脚本前请确保已安装 xlsx 包（项目已包含）
2. 原始测试数据文件不会被修改
3. 如需调整拆分比例，可修改脚本中的比例常数
4. 生成的数据仅用于测试，实际使用时请以真实数据为准
