# æµ‹è¯•æ–‡ä»¶å¤¹

æœ¬ç›®å½•åŒ…å«é¡¹ç›®çš„æ‰€æœ‰æµ‹è¯•è„šæœ¬å’Œæµ‹è¯•ç›¸å…³æ–‡ä»¶ã€‚

## ğŸ“ ç›®å½•ç»“æ„

```
test/
â”œâ”€â”€ README.md                    # æœ¬æ–‡ä»¶
â”œâ”€â”€ run_all_tests.sh             # è¿è¡Œæ‰€æœ‰æµ‹è¯•çš„ä¸»è„šæœ¬ â­
â”œâ”€â”€ test_security.sh             # å®‰å…¨åŠŸèƒ½æµ‹è¯•è„šæœ¬
â””â”€â”€ (æœªæ¥å¯æ·»åŠ æ›´å¤šæµ‹è¯•)
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆæ¨èï¼‰
```bash
# ä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
./test/run_all_tests.sh

# æˆ–è¿›å…¥ test ç›®å½•
cd test
./run_all_tests.sh
```

è¿™å°†è‡ªåŠ¨è¿è¡Œæ‰€æœ‰æµ‹è¯•å¥—ä»¶å¹¶ç”Ÿæˆæ±‡æ€»æŠ¥å‘Šã€‚

### è¿è¡Œå•ä¸ªæµ‹è¯•
```bash
# åªè¿è¡Œå®‰å…¨æµ‹è¯•
./test/test_security.sh
```

---

## ğŸ§ª æµ‹è¯•è„šæœ¬åˆ—è¡¨

### 1. å®‰å…¨åŠŸèƒ½æµ‹è¯• (`test_security.sh`)

**ç”¨é€”**: éªŒè¯ Helmet å’Œ Rate Limiting å®‰å…¨é…ç½®

**æµ‹è¯•å†…å®¹**:
- âœ… Helmet HTTP å®‰å…¨å“åº”å¤´
- âœ… ç™»å½•æ¥å£é™æµï¼ˆé˜²æš´åŠ›ç ´è§£ï¼‰
- âœ… API é€šç”¨é™æµ
- âœ… ä¸‹è½½æ¥å£é™æµï¼ˆé˜²æ•°æ®çˆ¬å–ï¼‰
- âœ… è®¡ç®—æ¥å£é™æµï¼ˆé˜²èµ„æºæ»¥ç”¨ï¼‰

**è¿è¡Œæ–¹æ³•**:
```bash
# ä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
./test/test_security.sh

# æˆ–è¿›å…¥ test ç›®å½•
cd test
./test_security.sh
```

**å‰ç½®æ¡ä»¶**:
- æœåŠ¡å™¨æ­£åœ¨è¿è¡Œï¼ˆ`npm start` æˆ– `pm2 start server.js`ï¼‰
- ç¡®ä¿ç«¯å£ 3000 å¯è®¿é—®
- å»ºè®®é‡å¯æœåŠ¡å™¨ä»¥æ¸…é™¤ä¹‹å‰çš„é™æµè®°å½•

**æµ‹è¯•ç»“æœ**:
- æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºçš„æµ‹è¯•æŠ¥å‘Š
- æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—: `pm2 logs | grep "é™æµè§¦å‘"`

---

## ğŸ“‹ æµ‹è¯•æœ€ä½³å®è·µ

### è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆæ¨èï¼‰
```bash
# ä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œæ‰€æœ‰æµ‹è¯•
./test/run_all_tests.sh

# æŸ¥çœ‹è¯¦ç»†è¾“å‡ºå¹¶ä¿å­˜æ—¥å¿—
./test/run_all_tests.sh 2>&1 | tee test_results.log
```

**ä¼˜ç‚¹**:
- âœ… è‡ªåŠ¨è¿è¡Œæ‰€æœ‰æµ‹è¯•å¥—ä»¶
- âœ… ç”Ÿæˆæ±‡æ€»æŠ¥å‘Šï¼ˆé€šè¿‡ç‡ã€å¤±è´¥æ•°ï¼‰
- âœ… è¿”å›æ­£ç¡®çš„é€€å‡ºç ï¼ˆCI/CD å‹å¥½ï¼‰
- âœ… æ¸…æ™°çš„è§†è§‰åé¦ˆ

### è¿è¡Œå•ä¸ªæµ‹è¯•
```bash
# åªæµ‹è¯•å®‰å…¨åŠŸèƒ½
./test/test_security.sh
```

### æµ‹è¯•å‰å‡†å¤‡
1. **å¯åŠ¨æœåŠ¡å™¨**
   ```bash
   npm start
   # æˆ–
   pm2 start server.js --name school-area-system
   ```

2. **æ¸…é™¤é™æµè®°å½•ï¼ˆå¯é€‰ï¼‰**
   ```bash
   pm2 restart school-area-system
   ```

3. **æ£€æŸ¥æ•°æ®åº“è¿æ¥**
   ```bash
   # ç¡®ä¿ MySQL æœåŠ¡è¿è¡Œä¸­
   mysql -u root -p school_area_db -e "SELECT 1"
   ```

### æµ‹è¯•åæ¸…ç†
```bash
# æŸ¥çœ‹æµ‹è¯•äº§ç”Ÿçš„æ—¥å¿—
pm2 logs school-area-system | grep "é™æµè§¦å‘"

# æ¸…ç†ä¸´æ—¶æ–‡ä»¶ï¼ˆæµ‹è¯•è„šæœ¬ä¼šè‡ªåŠ¨æ¸…ç†ï¼‰
rm -f /tmp/test_security_cookies.txt
```

---

## ğŸš€ æœªæ¥æ‰©å±•è®¡åˆ’

### å•å…ƒæµ‹è¯•ï¼ˆè®¡åˆ’ä¸­ï¼‰
```bash
test/
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ test_auth.js           # è®¤è¯æ¨¡å—æµ‹è¯•
â”‚   â”œâ”€â”€ test_calculation.js    # è®¡ç®—é€»è¾‘æµ‹è¯•
â”‚   â””â”€â”€ test_database.js       # æ•°æ®åº“æ“ä½œæµ‹è¯•
```

ä½¿ç”¨æ¡†æ¶: Jest æˆ– Mocha

### é›†æˆæµ‹è¯•ï¼ˆè®¡åˆ’ä¸­ï¼‰
```bash
test/
â”œâ”€â”€ integration/
â”‚   â”œâ”€â”€ test_api.js            # API æ¥å£æµ‹è¯•
â”‚   â””â”€â”€ test_workflow.js       # å®Œæ•´ä¸šåŠ¡æµç¨‹æµ‹è¯•
```

ä½¿ç”¨æ¡†æ¶: Supertest + Jest

### æ€§èƒ½æµ‹è¯•ï¼ˆè®¡åˆ’ä¸­ï¼‰
```bash
test/
â”œâ”€â”€ performance/
â”‚   â”œâ”€â”€ test_load.sh           # è´Ÿè½½æµ‹è¯•
â”‚   â””â”€â”€ test_stress.sh         # å‹åŠ›æµ‹è¯•
```

ä½¿ç”¨å·¥å…·: Apache Bench (ab) æˆ– Artillery

### E2E æµ‹è¯•ï¼ˆè®¡åˆ’ä¸­ï¼‰
```bash
test/
â”œâ”€â”€ e2e/
â”‚   â”œâ”€â”€ test_login.spec.js     # ç™»å½•æµç¨‹
â”‚   â”œâ”€â”€ test_data_entry.spec.js # æ•°æ®å½•å…¥æµç¨‹
â”‚   â””â”€â”€ test_export.spec.js    # æ•°æ®å¯¼å‡ºæµç¨‹
```

ä½¿ç”¨æ¡†æ¶: Playwright æˆ– Cypress

---

## ğŸ“Š æµ‹è¯•è¦†ç›–ç‡

å½“å‰çŠ¶æ€:
- âœ… **å®‰å…¨æµ‹è¯•**: 100% (Helmet + Rate Limiting)
- â³ **å•å…ƒæµ‹è¯•**: 0% (è®¡åˆ’ä¸­)
- â³ **é›†æˆæµ‹è¯•**: 0% (è®¡åˆ’ä¸­)
- â³ **E2E æµ‹è¯•**: 0% (è®¡åˆ’ä¸­)

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: æµ‹è¯•è„šæœ¬æƒé™ä¸è¶³
```bash
chmod +x test/*.sh
```

### Q2: æµ‹è¯•æ—¶æœåŠ¡å™¨æœªè¿è¡Œ
```bash
# æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€
pm2 status

# å¯åŠ¨æœåŠ¡å™¨
npm start
```

### Q3: ç™»å½•é™æµå¯¼è‡´æµ‹è¯•å¤±è´¥
```bash
# é‡å¯æœåŠ¡å™¨æ¸…é™¤é™æµ
pm2 restart school-area-system

# æˆ–ç­‰å¾… 15 åˆ†é’Ÿ
```

### Q4: Cookie æ–‡ä»¶æœªæ¸…ç†
```bash
# æ‰‹åŠ¨æ¸…ç†
rm -f /tmp/test_security_cookies.txt
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å®‰å…¨é…ç½®æ–‡æ¡£](../README.md#-å®‰å…¨ç‰¹æ€§)
- [é¡¹ç›®ç»“æ„æ–‡æ¡£](../PROJECT_STRUCTURE.md)
- [API æ–‡æ¡£](../README.md#-api-æ¥å£æ–‡æ¡£)

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### æ·»åŠ æ–°æµ‹è¯•
1. åœ¨ç›¸åº”ç›®å½•åˆ›å»ºæµ‹è¯•æ–‡ä»¶
2. éµå¾ªç°æœ‰å‘½åè§„èŒƒ `test_*.sh` æˆ– `test_*.js`
3. åœ¨æœ¬ README ä¸­æ·»åŠ æ–‡æ¡£
4. æ›´æ–°æµ‹è¯•è¦†ç›–ç‡ç»Ÿè®¡

### æµ‹è¯•è„šæœ¬è§„èŒƒ
- ä½¿ç”¨æ¸…æ™°çš„æµ‹è¯•åç§°
- æä¾›è¯¦ç»†çš„è¾“å‡ºä¿¡æ¯
- åŒ…å«æˆåŠŸ/å¤±è´¥çŠ¶æ€
- è‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶
- æ·»åŠ å¿…è¦çš„æ³¨é‡Š

---

<div align="center">

**æµ‹è¯•é©±åŠ¨å¼€å‘** ğŸ§ª

æŒç»­æ”¹è¿›ï¼Œä¿è¯è´¨é‡

</div>
